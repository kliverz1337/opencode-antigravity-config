---
description: Publish Antigravity Config Installer to NPM
---

# NPM Publishing Workflow

This workflow guides you through the process of publishing an updated version of the OpenCode Antigravity Config Installer package to the global NPM registry. 

## Requirements
- You must be authenticated to NPM globally (`npm whoami` should return your username).
- If your NPM account uses 2FA (Two-Factor Authentication), you will need your authenticator app ready.

## Steps

1. **Verify Code Readiness**
   Ensure all changes are committed and your working tree in `git status` is perfectly clean. The `npm version patch` command requires a clean Git history.

2. **Run Config Builder**
   If you have modified any configuration files inside the `/templates` directory, make sure the config injector script has been verified. (This happens automatically in `config-data.js` via dynamic reading, but ensure your JSON syntax is valid before publishing.)

3. **Bump the Version**
   Increase the package semantic version to stamp a new release.
   ```bash
   // turbo
   npm version patch
   ```

4. **Publish to NPM**
   Publish the new version to the public registry. 
   *(Note: If you encounter an `ENEEDAUTH` or `403` error because of 2FA, use `npm publish --otp=123456` instead, replacing 123456 with your authenticator code!)*
   ```bash
   npm publish
   ```

5. **Sync with Git Remote**
   Push the new version commit and its corresponding tags generated by `npm version` to your remote GitHub repository.
   ```bash
   // turbo
   git push origin main --tags
   ```

6. **Verify the Deployment**
   Test the newly deployed package using `npx` from any directory to ensure the latest changes are reflected on the cloud.
   ```bash
   npx --yes opencode-antigravity-config@latest
   ```
